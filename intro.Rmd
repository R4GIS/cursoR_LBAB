---
title: "Curso R - Introdução"
author: "Ítalo Cegatta"
date: "3 de junho de 2016"
output:
  html_document:
    keep_md: true
---

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(warning=FALSE, message=FALSE,
  fig.width=10, fig.height=8, dpi=400)
```

# Sobre o R

O R é um software open-source mantido por um grupo de voluntários de vários países, o R-core team. No site oficial do [projeto](https://www.r-project.org/) a primeira descrição sobre ele é a seguinte:

> O R é uma linguagem e ambiente para computação estatística e gráficos.

Esse grupo mantem o sistema base que possibilita a interação com a linguagem R para computação numérica, manipulação de dados, gráficos e uma variedade de outras tarefas. No R, tudo o que acontece é o resultado de uma função. Eu, você e tantos outros usuários podemos desenvolver funções para facilitar a nossa vida e posteriormente organizá-las em pacotes (ou *packages*) e disponibilizar para todo o mundo.

O projeto do R teve início com Ross Ihaka e Robert Gentleman nos anos 90 a partir de uma implementação da linguagem S, que foi desenvolvida anos antes por um grupo de pesquisadores liderados por John Chambers no Bell Laboratories. Desde então, o R tem crescido em um ritmo absurdo e pode ser considerado o principal software livre para programação estatística e um dos mais usados no mundo. Não vou listar todas potencialidades do R aqui neste post, em primeiro lugar por que eu não domino todas elas, e segundo por que com certeza o post ficaria muito grande :P. Com o tempo vou apresentar nos posts algumas aplicações pontuais do R com relação aos problemas que precisei resolver. Mas já adianto, é comum dizermos que a pergunta certa sobre uma tarefa no R não é *se podemos fazer*, mas sim *como* podemos fazer.

# Estrutura dos dados

Como em qualquer outra linguagem de programação, o R tem em sua concepção tipos e estruturas de dados que determinam como será o comportamento durante os processos. Os tipos de dados são estes: 

|    | Homogêneo     | Heterogêneo   |
|----|---------------|---------------|
| 1d | Atomic vector | List          |
| 2d | Matrix        | Data frame    |
| nd | Array         |               |

É importante entender a diferença entre estes tipo de objetos pois cada um dele tem um comportamento diferente e exigem tipos específicos de elementos.

## Atomic Vectors

Um vetor aceita 4 tipos de elementos: integer, double, character e logical. Teste o código abaixo atribuindo elementos aos objetos.

```{r tipos de objetos}
x <- 1
typeof(x)

x <- 1L
typeof(x)

x <- 2.333
typeof(x)

x <- "a"
typeof(x)

x <- TRUE
typeof(x)

x <- c("a", "b", "c", "d")
typeof(x)
```

Por que isso é importante? Cada função é desenhada para trabalhar com um certo tipo de objeto e elementos. Veja os exemplos abaixo.

```{r comportamento dos tipos de elementos}
x <- c(1, 5, 10, 15)
x

mean(x)

x <- c(1, 5, 10, "15")
x

mean(x)

x <- as.numeric(c(1, 5, 10, "15"))
x
mean(x)
```

## Lists

As listas são vetores com flexibilidade quanto ao tipo do elemento. Para criá-la basta usar `list()` ao invés de `c()`.

```{r listas}
x <- list(1:3, "a", c(TRUE, FALSE, TRUE), c(2.3, 5.9))
x

str(x)
```

## Matrices and arrays

Se acrescentarmos mais dimensões aos vetores teremos matrizes (2d) e arrays (ou arranjos) para várias dimensões.

```{r matriz e array}
x <- matrix(1:6, ncol = 3, nrow = 2)
x
typeof(x)
class(x)

x <- array(1:18, c(2, 3, 3))
x
typeof(x)
class(x)

x <- list(1:3, "a", TRUE, 1.0, matrix(1:6, ncol = 3, nrow = 2))
x
typeof(x)
class(x)
```

## Data frames

Objetos do tipo Data frame são os mais comuns quando estamos trabalhando no R. Você pode entender um data frame como um conjunto de vetores, ou como uma matriz com maior flexibilidade.

```{r data frames}

x <- 1:10
y <- c("a", "b")

df <- data.frame(x, y)
df

str(df)


df2 <- cbind(df, z = 21:30)

df3 <- rbind(df2, c(100, "a", 200))
df3
```

# Subsetting

O acesso ao elemento armazenado em um objeto pode ser feito com 3 operadores: `$`, `[` e `[[`.

## Vetores

```{r subset vetores}
## Número interiro positivo

x <- c(5.4, 6.2, 7.1, 4.8)

x[2]

x[c(2,3)]

x[c(2,2)]


## Número inteiro negativo

x[-1]

x[-c(1, 2, 3)]


## Operador lógico

x[c(TRUE, TRUE, FALSE, FALSE)]

x[x > 6]
```

## Listas

```{r subset listas}
x <- list(vetor = 1:3, letra = "a", logico = c(TRUE, FALSE, TRUE))
x

x$vetor

x[1]

x[[1]]
```

## Matrizes

```{r subset matrizes}
x <- matrix(1:6, ncol = 3, nrow = 2)
x

colnames(x) <- c("A", "B", "C")
x

x[ ,3]

x[1, ]

x[ , "A"]

x[c(TRUE, FALSE), ]

x[, -2]
```

## Data frames

```{r subset data frames}
df <- data.frame(x = 1:3, y = 3:1, z = letters[1:3])

df$x

df[ , 2]

df[ , "y"]

df[c(1,2), ]

df[df$x == 2, ]
```
